# GoodFellaz17 Context for GitHub Copilot

## Project Overview
- **Name:** GoodFellaz17 Spotify Bot Delivery Engine
- **Goal:** Self-hosted Spotify plays delivery system (Phase 2A: Account provisioning)
- **Stack:** Java 17, Spring Boot 3.2, R2DBC, PostgreSQL, Selenium 4.x

## Current Architecture

### Domain Layer
- `SpotifyAccount.java`: Entity with fields
  - email: String (unique)
  - password: String (encrypted)
  - spotifyUserId: String
  - status: CREATED|PENDING_EMAIL_VERIFICATION|ACTIVE|DEGRADED|BANNED
  - createdAt: LocalDateTime
  - lastPlayedAt: LocalDateTime

### Repository Layer
- `SpotifyAccountRepository.java`: R2DBC reactive queries
  - save(account): Mono<SpotifyAccount>
  - countByStatus(status): Mono<Long>
  - findAll(): Flux<SpotifyAccount>

### Service Layer (Existing)
- `OrderOrchestrator.java`: Creates orders, decomposes into tasks
- `TaskExecutorWorker.java`: Background polling for PENDING tasks
- `TaskExecutionService.java`: Executes individual tasks

## Phase 2A Tasks (What We're Building)

### SCRIPT 1: GmailAccountCreator.java
- Purpose: Generate @gmx.de email accounts via Selenium
- Input: (none - generates internally)
- Output: /data/gmx_accounts.csv + database records
- Schedule: Every 10 minutes (one account at a time)

### SCRIPT 2: SpotifyAccountCreator.java
- Purpose: Create Spotify accounts from generated GMX emails
- Input: /data/gmx_accounts.csv
- Output: database records (status=PENDING_EMAIL_VERIFICATION)
- Schedule: Every 15 minutes (one account at a time)

### SCRIPT 3: GoodFellaz17IntegrationOrchestrator.java
- Purpose: Orchestrate both + expose REST APIs + monitor health
- Endpoints:
  - GET /api/accounts/status
  - POST /api/accounts/create-now
  - GET /api/accounts/health
  - GET /api/accounts/next-available
  - POST /api/accounts/webhook/order-placed (from botzzz773.pro)

## Code Style Rules
- Spring annotations: @Service, @Autowired, @Scheduled
- Reactive patterns: CompletableFuture, Mono, Flux
- Logging: @Slf4j with log.info, log.error
- Error handling: try-catch with meaningful messages
- Naming: camelCase, verbose method names
- Imports: Use lombok (@Slf4j, @Autowired)

## Selenium Best Practices (For This Project)
- Use WebDriverManager.chromedriver().setup()
- Headless mode: --headless, --no-sandbox, --disable-dev-shm-usage
- Waits: WebDriverWait(driver, Duration.ofSeconds(30))
- Locators: By.id, By.name, By.xpath (in that priority)
- Error handling: TimeoutException, NoSuchElementException specific handling

## Integration Points
- Database: PostgreSQL pipeline_spotify_accounts table
- CSV files: /data/gmx_accounts.csv, /data/gmx_accounts_processed.csv
- Webhooks: POST to botzzz773.pro/webhook/accounts-status (every 5 min)
- Scheduling: @Scheduled(fixedRate) in milliseconds

## Known Constraints
- Rate limiting: 1 account per 10-15 minutes (avoid detection)
- GMX signup: No CAPTCHA expected, but may appear
- Spotify signup: Email verification required (cannot auto-verify)
- Browser crashes: Restart WebDriver and continue
- Pool size: Maintain minimum 50 accounts, alert if <20
